# Generating the files

Gohandlers can generate 2 different Go files. Files are for processing requests and making requests. The former is called helper file and the latter is called client file.

## Generating helper files

Helpers are methods you call inside handlers and for route registration. To produce the helpers file you need to run the helpers subcommand.

```sh
cd <handlers directory>
gohandlers helpers
```

That's all. If everything goes right, you'll see a `gh.go` file at the same directory. Inside the helpers file, there should be your listers, request builders, request parsers, request validators, response builders and response writers. More on that is in the [Listing handlers](../2.%20Usage/1.listing-handlers.md) and the [Processing requests](../2.%20Usage/2.processing-requests.md) sections.

```go
func (pe *Pets) ListHandlers() map[string]gohandlers.HandlerInfo

func (bq CreateRequest) Build(host string) (*http.Request, error)
func (bq *CreateRequest) Parse(rq *http.Request) error
func (bq CreateRequest) Validate() (issues map[string]any)

func (bs CreateResponse) Write(w http.ResponseWriter) error
func (bs *CreateResponse) Parse(rs *http.Response) error

// ...
```

## Generating client files

Gohandlers provides Client, Mock and Interface type declarations which allow you to call your services as well as unit test the consumer service methods in isolation. Client file requires the helpers file, but it is optional. For services that is not consumed by Go services, such as APIs intended to be called from frontend, client file is not needed at all. To generate the client file pick the input and output folders. The client file might be in different folder, named as `client` and also has that as the package name. Because of that it also needs to know how to import the helpers file.

```sh
cd <service root>
gohandlers client \
  -dir endpoints \
  -import <import path of handlers file package> \
  -out client/client.go \
  -pkg <service name>
```

This should produce a file with content below. While `Mock` methods are almost empty, `Client` methods are functional. More on that is in the [Making requests](../2.%20Usage/3.making-requests.md) section.

```go
package <service name>

import (
	"fmt"
	"net/http"
	"<import path of handlers file package>"
)

type Interface interface {
  CheckMembership(*endpoints.CheckMembershipRequest) (*endpoints.CheckMembershipResponse, error)
  CheckMembershipEventual(*endpoints.CheckMembershipEventualRequest) (*endpoints.CheckMembershipEventualResponse, error)
  CreateGroup(*endpoints.CreateGroupRequest) (*endpoints.CreateGroupResponse, error)
  InviteMembers(*endpoints.InviteMembersRequest) (*http.Response, error)
  RespondToGroupInvite(*endpoints.RespondToGroupInviteRequest) (*http.Response, error)
  RespondToUserInvite(*endpoints.RespondToUserInviteRequest) (*http.Response, error)
}

type Mock struct {}
func (m *Mock) CheckMembership(*endpoints.CheckMembershipRequest) (*endpoints.CheckMembershipResponse, error)
func (m *Mock) CheckMembershipEventual(*endpoints.CheckMembershipEventualRequest) (*endpoints.CheckMembershipEventualResponse, error)
func (m *Mock) CreateGroup(*endpoints.CreateGroupRequest) (*endpoints.CreateGroupResponse, error)
func (m *Mock) InviteMembers(*endpoints.InviteMembersRequest) (*http.Response, error)
func (m *Mock) RespondToGroupInvite(*endpoints.RespondToGroupInviteRequest) (*http.Response, error)
func (m *Mock) RespondToUserInvite(*endpoints.RespondToUserInviteRequest) (*http.Response, error)

type Pool interface {
  Host() (string, error)
}

type Client struct { p Pool }

func NewClient(p Pool) *Client

func (c *Client) CheckMembership(bq *endpoints.CheckMembershipRequest) (*endpoints.CheckMembershipResponse, error)
func (c *Client) CheckMembershipEventual(bq *endpoints.CheckMembershipEventualRequest) (*endpoints.CheckMembershipEventualResponse, error)
func (c *Client) CreateGroup(bq *endpoints.CreateGroupRequest) (*endpoints.CreateGroupResponse, error)
func (c *Client) InviteMembers(bq *endpoints.InviteMembersRequest) (*http.Response, error)
func (c *Client) RespondToGroupInvite(bq *endpoints.RespondToGroupInviteRequest) (*http.Response, error)
func (c *Client) RespondToUserInvite(bq *endpoints.RespondToUserInviteRequest) (*http.Response, error)
```
