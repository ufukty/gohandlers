<!-- Do not edit. Auto-generated by Kask  -->

<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><code>client</code> - Gohandlers</title>

    
    <link rel="stylesheet" href="/propagate-155137bd-8795-44d5-af23-b41459967440.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code&family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
  </head>

  <body>

    <div class="site-wide-note">Machine generated documentation. <a href="https://github.com/ufukty/gohandlers/issues" target="_self">Contribute</a> to improve quality together.</div>

    <div id="markdown-page-column-layout">

      <header>
        <nav id="sitemap">
          <details open>
            <summary>Site map</summary>
            <div class="summarized">
              

<ul>
  
  <a href="/index.html">gohandlers</a>
  
  
  <li>

<ul>
  
  <span>Articles</span>
  
  
  <li>

<ul>
  
  <span>Getting Started</span>
  
  
  
  <li>

<ul>
  
  <a href="/articles/getting-started/getting-started.html">Getting Started with gohandlers: Build HTTP APIs in Goâ€”Effortlessly!</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/articles/getting-started/overview.html">Overview: What Problem Does gohandlers Solve?</a>
  
  
  
</ul>

</li>
</ul>

</li>
  <li>

<ul>
  
  <span>Using Gohandlers</span>
  
  
  
  <li>

<ul>
  
  <a href="/articles/using-gohandlers/the-gohandler-way.html">The gohandlers Way of Writing HTTP Handlers in Go</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/articles/using-gohandlers/understanding-binding-structs-and-tags.html">Understanding Binding Structs and Tags in gohandlers</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/articles/using-gohandlers/understanding-validation-and-custom-types.html">Understanding Validation &amp; Custom Types in gohandlers</a>
  
  
  
</ul>

</li>
</ul>

</li>
  
</ul>

</li>
  <li>

<ul>
  
  <span>Reference</span>
  
  
  <li>

<ul>
  
  <span>Advanced</span>
  
  
  
  <li>

<ul>
  
  <a href="/reference/advanced/complex-api.html">Managing Complex APIs: Advanced Tag Usage in gohandlers</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/advanced/error-handling.html">Error Handling &amp; Customization Patterns in gohandlers</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/advanced/testing-clients.html">Testing Your API with Generated Mock Clients in gohandlers</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/advanced/typed-clients.html">Generating Typed HTTP Clients with gohandlers</a>
  
  
  
</ul>

</li>
</ul>

</li>
  <li>

<ul>
  
  <span>Commands</span>
  
  
  
  <li>

<ul>
  
  <a href="/reference/commands/bindings.html"><code>bindings</code></a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/commands/client.html"><code>client</code></a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/commands/list.html">list</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/commands/mock.html">mock</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/commands/validate.html">validate</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/commands/yaml.html">yaml</a>
  
  
  
</ul>

</li>
</ul>

</li>
  <li>

<ul>
  
  <span>Core Concepts</span>
  
  
  
  <li>

<ul>
  
  <a href="/reference/core-concepts/metadata-driven.html">metadata-driven</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/core-concepts/overview.html">overview</a>
  
  
  
</ul>

</li>
</ul>

</li>
  <li>

<ul>
  
  <span>Internals</span>
  
  
  
  <li>

<ul>
  
  <a href="/reference/internals/overview.html">overview</a>
  
  
  
</ul>

</li>
</ul>

</li>
  
</ul>

</li>
  
</ul>


            </div>
          </details>
        </nav>

        
        <nav id="toc">
          <details open>
            <summary>In this page</summary>
            <div class="summarized">
              <ul>
                
                <li>
                  <a href="#client" class="toc1"><code>client</code></a>
                  
                  <ul>
                    
                    <li>
                      <a href="#what-it-solves" class="toc2">What it solves?</a>
                      
                    </li>
                    <li>
                      <a href="#usage" class="toc2">Usage</a>
                      
                    </li>
                    <li>
                      <a href="#example" class="toc2">Example</a>
                      
                    </li>
                  </ul>
                </li>
              </ul>
            </div>
          </details>
        </nav>
      </header>

      <script>
        function onChange(eval, callback) {
          let last;
          return () => {
            let next = eval()
            if (last != next) {
              last = next
              callback()
            }
          }
        }
        function detailsElemStateAdjuster() {
          let elems = document.querySelectorAll("nav>details")
          let summaries = document.querySelectorAll("nav>details>summary")
          return () => {
            elems.forEach(e => {
              e.open = window.innerWidth >= 700
            })
            summaries.forEach(e => {
              e.style.display = window.innerWidth >= 700 ? "none" : "block"
              e.onclick = window.innerWidth >= 700 ? (e) => { e.preventDefault() } : undefined
            })
          }
        }
        let adjuster = detailsElemStateAdjuster()
        adjuster()
        window.addEventListener("resize", onChange(() => { return window.innerWidth >= 700 }, adjuster, 100))
      </script>

      <main class="markdown">
        <h1 id="client"><code>client</code></h1>

<p>Generates a Go file (default <code>client.gh.go</code>) containing a <strong>Client struct</strong> and one method per handler function. These methods construct HTTP requests using your binding types and send them, returning the response (either raw or parsed into a response binding).</p>

<ul>
<li><strong>Generated Client Structure:</strong> The client has a simple pool-based design for obtaining host URLs:</li>
</ul>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">  <span class="kd">type</span> <span class="nx">Pool</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Host</span><span class="p">()</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">type</span> <span class="nx">Client</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">p</span> <span class="nx">Pool</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">func</span> <span class="nf">NewClient</span><span class="p">(</span><span class="nx">p</span> <span class="nx">Pool</span><span class="p">)</span> <span class="o">*</span><span class="nx">Client</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="o">&amp;</span><span class="nx">Client</span><span class="p">{</span><span class="nx">p</span><span class="p">:</span> <span class="nx">p</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span></code></pre>
<p>You supply a <code>Pool</code> (which could be as simple as a struct with a <code>Host()</code> that returns a constant base URL, or something more sophisticated for load balancing).</p>

<ul>
<li><strong>Generated Methods:</strong> For each handler, the client has a similarly named method. It takes a pointer to the request struct and returns either a pointer to the response struct (if one is defined) or an <code>*http.Response</code> (if no response binding exists). Example:</li>
</ul>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">  <span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">Client</span><span class="p">)</span> <span class="nf">CreatePet</span><span class="p">(</span><span class="nx">req</span> <span class="o">*</span><span class="nx">pets</span><span class="p">.</span><span class="nx">CreatePetRequest</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">pets</span><span class="p">.</span><span class="nx">CreatePetResponse</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">Client</span><span class="p">)</span> <span class="nf">DeletePet</span><span class="p">(</span><span class="nx">req</span> <span class="o">*</span><span class="nx">pets</span><span class="p">.</span><span class="nx">DeletePetRequest</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Response</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span></code></pre>
<p>Under the hood, these methods will:</p>

<ol>
<li>Call <code>c.p.Host()</code> to get the base URL.</li>
<li>Call <code>req.Build(host)</code> to get an <code>*http.Request</code>.</li>
<li>Use <code>http.DefaultClient.Do(request)</code> to perform the HTTP call.</li>
<li>Check for non-200 status codes and return errors accordingly.</li>
<li>If thereâ€™s a response struct (<code>CreatePetResponse</code> in this case), instantiate it and <a href="https://github.com/ufukty/gohandlers-petstore/blob/280eff72d24d32f5d61b32361653de906cd639bd/client/client.gh.go#L40" target="_blank">call</a> <code>.Parse(response)</code> to populate it, then return it.</li>
</ol>

<h2 id="what-it-solves">What it solves?</h2>

<p>Writing and maintaining custom client code for your API (or using generic tools) can lead to mismatches as your API evolves. The gohandlers client ensures <strong>the client library always matches the server</strong>. If you add a new query parameter or change an endpoint, regenerate the client â€” it will have the updated method signature and logic.</p>

<h2 id="usage">Usage</h2>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="c1"># gohandlers client --help</span>
</span></span><span class="line"><span class="cl">Usage of client:
</span></span><span class="line"><span class="cl">  -dir string
</span></span><span class="line"><span class="cl">        input directory
</span></span><span class="line"><span class="cl">  -import string
</span></span><span class="line"><span class="cl">        the import path of package declares binding types
</span></span><span class="line"><span class="cl">  -out string
</span></span><span class="line"><span class="cl">        output directory
</span></span><span class="line"><span class="cl">  -pkg string
</span></span><span class="line"><span class="cl">        package name <span class="k">for</span> the generated file
</span></span><span class="line"><span class="cl">  -v    prints additional information
</span></span></code></pre>
<h2 id="example">Example</h2>

<p>Using the <code>CreatePet</code> example from previous examples, after running:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">gohandlers client <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -dir handlers/pets <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -out client/client.gh.go <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -pkg client <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -import <span class="s2">&#34;github.com/yourusername/yourrepo/handlers/pets&#34;</span>
</span></span></code></pre>
<p>This will generate <a href="https://github.com/ufukty/gohandlers-petstore/blob/280eff72d24d32f5d61b32361653de906cd639bd/client/client.gh.go#L23-L45" target="_blank"><code>client/client.gh.go</code></a> containing a <code>Client</code> with a method:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">Client</span><span class="p">)</span> <span class="nf">CreatePet</span><span class="p">(</span><span class="nx">bq</span> <span class="o">*</span><span class="nx">pets</span><span class="p">.</span><span class="nx">CreatePetRequest</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">pets</span><span class="p">.</span><span class="nx">CreatePetResponse</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">h</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">p</span><span class="p">.</span><span class="nf">Host</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">rq</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">bq</span><span class="p">.</span><span class="nf">Build</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">rs</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">DefaultClient</span><span class="p">.</span><span class="nf">Do</span><span class="p">(</span><span class="nx">rq</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">bs</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">pets</span><span class="p">.</span><span class="nx">CreatePetResponse</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">err</span> <span class="p">=</span> <span class="nx">bs</span><span class="p">.</span><span class="nf">Parse</span><span class="p">(</span><span class="nx">rs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">return</span> <span class="nx">bs</span><span class="p">,</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre>
<p>For <code>DeletePet</code> which has no response struct, the method would return <code>(*http.Response, error)</code> and skip parsing (just return the raw response on success).</p>

<p>You can then use the generated client in your other Go services or tests:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">pool</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">StaticPool</span><span class="p">{</span><span class="nx">BaseURL</span><span class="p">:</span> <span class="s">&#34;http://localhost:8080&#34;</span><span class="p">}</span>  <span class="c1">// your implementation of Pool
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">pets</span> <span class="o">:=</span> <span class="nx">client</span><span class="p">.</span><span class="nf">NewClient</span><span class="p">(</span><span class="nx">pool</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">resp</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">pets</span><span class="p">.</span><span class="nf">CreatePet</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">pets</span><span class="p">.</span><span class="nx">CreatePetRequest</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Name</span><span class="p">:</span> <span class="s">&#34;Doge&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Tag</span><span class="p">:</span>  <span class="s">&#34;meme&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;New pet ID:&#34;</span><span class="p">,</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">ID</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre>
      </main>

    </div>
  </body>

</html>
