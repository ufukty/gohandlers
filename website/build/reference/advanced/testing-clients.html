<!-- Do not edit. Auto-generated by Kask  -->

<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing Your API with Generated Mock Clients in gohandlers - Gohandlers</title>

    
    <link rel="stylesheet" href="/propagate-155137bd-8795-44d5-af23-b41459967440.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code&family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
  </head>

  <body>

    <div class="site-wide-note">Machine generated documentation. <a href="https://github.com/ufukty/gohandlers/issues" target="_self">Contribute</a> to improve quality together.</div>

    <div id="markdown-page-column-layout">

      <header>
        <nav id="sitemap">
          <details open>
            <summary>Site map</summary>
            <div class="summarized">
              

<ul>
  
  <a href="/index.html">gohandlers</a>
  
  
  <li>

<ul>
  
  <span>Articles</span>
  
  
  <li>

<ul>
  
  <span>Getting Started</span>
  
  
  
  <li>

<ul>
  
  <a href="/articles/getting-started/getting-started.html">Getting Started with gohandlers: Build HTTP APIs in Go—Effortlessly!</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/articles/getting-started/overview.html">Overview: What Problem Does gohandlers Solve?</a>
  
  
  
</ul>

</li>
</ul>

</li>
  <li>

<ul>
  
  <span>Using Gohandlers</span>
  
  
  
  <li>

<ul>
  
  <a href="/articles/using-gohandlers/the-gohandler-way.html">The gohandlers Way of Writing HTTP Handlers in Go</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/articles/using-gohandlers/understanding-binding-structs-and-tags.html">Understanding Binding Structs and Tags in gohandlers</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/articles/using-gohandlers/understanding-validation-and-custom-types.html">Understanding Validation &amp; Custom Types in gohandlers</a>
  
  
  
</ul>

</li>
</ul>

</li>
  
</ul>

</li>
  <li>

<ul>
  
  <span>Reference</span>
  
  
  <li>

<ul>
  
  <span>Advanced</span>
  
  
  
  <li>

<ul>
  
  <a href="/reference/advanced/complex-api.html">Managing Complex APIs: Advanced Tag Usage in gohandlers</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/advanced/error-handling.html">Error Handling &amp; Customization Patterns in gohandlers</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/advanced/testing-clients.html">Testing Your API with Generated Mock Clients in gohandlers</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/advanced/typed-clients.html">typed-clients</a>
  
  
  
</ul>

</li>
</ul>

</li>
  <li>

<ul>
  
  <span>Commands</span>
  
  
  
  <li>

<ul>
  
  <a href="/reference/commands/bindings.html">bindings</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/commands/client.html">client</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/commands/list.html">list</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/commands/mock.html">mock</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/commands/validate.html">validate</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/commands/yaml.html">yaml</a>
  
  
  
</ul>

</li>
</ul>

</li>
  <li>

<ul>
  
  <span>Core Concepts</span>
  
  
  
  <li>

<ul>
  
  <a href="/reference/core-concepts/metadata-driven.html">metadata-driven</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/core-concepts/overview.html">overview</a>
  
  
  
</ul>

</li>
</ul>

</li>
  <li>

<ul>
  
  <span>Internals</span>
  
  
  
  <li>

<ul>
  
  <a href="/reference/internals/overview.html">overview</a>
  
  
  
</ul>

</li>
</ul>

</li>
  
</ul>

</li>
  
</ul>


            </div>
          </details>
        </nav>

        
        <nav id="toc">
          <details open>
            <summary>In this page</summary>
            <div class="summarized">
              <ul>
                
                <li>
                  <a href="#testing-your-api-with-generated-mock-clients-in-gohandlers" class="toc1">Testing Your API with Generated Mock Clients in gohandlers</a>
                  
                  <ul>
                    
                    <li>
                      <a href="#why-use-a-mock-client" class="toc2">🧪 Why Use a Mock Client?</a>
                      
                    </li>
                    <li>
                      <a href="#generating-mocks" class="toc2">⚙️ Generating Mocks</a>
                      
                    </li>
                    <li>
                      <a href="#example-unit-testing-with-a-mock" class="toc2">🧰 Example: Unit Testing with a Mock</a>
                      
                    </li>
                    <li>
                      <a href="#mock-signature" class="toc2">📐 Mock Signature</a>
                      
                    </li>
                    <li>
                      <a href="#mocking-edge-cases" class="toc2">🎛 Mocking Edge Cases</a>
                      
                    </li>
                    <li>
                      <a href="#table-driven-testing-with-mocks" class="toc2">🔁 Table-Driven Testing with Mocks</a>
                      
                    </li>
                    <li>
                      <a href="#why-mocks-are-better-than-test-servers" class="toc2">🧠 Why Mocks Are Better Than Test Servers</a>
                      
                    </li>
                    <li>
                      <a href="#best-practices" class="toc2">🧼 Best Practices</a>
                      
                    </li>
                    <li>
                      <a href="#summary" class="toc2">✅ Summary</a>
                      
                    </li>
                  </ul>
                </li>
              </ul>
            </div>
          </details>
        </nav>
      </header>

      <script>
        function onChange(eval, callback) {
          let last;
          return () => {
            let next = eval()
            if (last != next) {
              last = next
              callback()
            }
          }
        }
        function detailsElemStateAdjuster() {
          let elems = document.querySelectorAll("nav>details")
          let summaries = document.querySelectorAll("nav>details>summary")
          return () => {
            elems.forEach(e => {
              e.open = window.innerWidth >= 700
            })
            summaries.forEach(e => {
              e.style.display = window.innerWidth >= 700 ? "none" : "block"
              e.onclick = window.innerWidth >= 700 ? (e) => { e.preventDefault() } : undefined
            })
          }
        }
        let adjuster = detailsElemStateAdjuster()
        adjuster()
        window.addEventListener("resize", onChange(() => { return window.innerWidth >= 700 }, adjuster, 100))
      </script>

      <main class="markdown">
        <blockquote>
<p><strong>PREVIEW</strong></p>

<p>Functionality in this post is in consideration and is not currently under development.</p>
</blockquote>

<h1 id="testing-your-api-with-generated-mock-clients-in-gohandlers">Testing Your API with Generated Mock Clients in gohandlers</h1>

<p>When building an HTTP API, it’s crucial to test the layers <em>around</em> your HTTP handlers: the business logic, the services, the integrations. But if your code depends on a real HTTP client to call your own API, testing can get messy and slow—requiring servers, requests, responses, and a lot of setup.</p>

<p>That’s where <strong>gohandlers</strong> shines again. It doesn’t just generate server-side code and typed HTTP clients—it also creates <strong>mock clients</strong>, so you can test your services quickly and deterministically, with no need to spin up HTTP servers or stub request objects.</p>

<p>In this article, you’ll learn how to use gohandlers’ generated mocks to write fast, focused, and maintainable tests for any code that uses your API clients.</p>

<hr>

<h2 id="why-use-a-mock-client">🧪 Why Use a Mock Client?</h2>

<p>Imagine you have a service that relies on an API client to call another module or service in your system:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">PetService</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Client</span> <span class="nx">client</span><span class="p">.</span><span class="nx">Interface</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">PetService</span><span class="p">)</span> <span class="nf">RegisterPet</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">tag</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="kt">string</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">resp</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">Client</span><span class="p">.</span><span class="nf">CreatePet</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">client</span><span class="p">.</span><span class="nx">CreatePetRequest</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Name</span><span class="p">:</span> <span class="nx">name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Tag</span><span class="p">:</span>  <span class="nx">tag</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">resp</span><span class="p">.</span><span class="nx">ID</span><span class="p">,</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre>
<p>How do you test this without calling the real API?</p>

<p>You use a <strong>mock client</strong>—one that pretends to be the real thing, but behaves how you want in your test.</p>

<hr>

<h2 id="generating-mocks">⚙️ Generating Mocks</h2>

<p>To generate mocks for your typed API client, run:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">gohandlers mock <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --dir handlers/pets <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --pkg client <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --out mock.gh.go <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  --v
</span></span></code></pre>
<p>This will generate:</p>

<ul>
<li>A <code>MockClient</code> type</li>
<li>An <code>Interface</code> that both the real and mock clients implement</li>
<li>Methods like <code>CreatePetFunc</code> that you can stub in your tests</li>
</ul>

<hr>

<h2 id="example-unit-testing-with-a-mock">🧰 Example: Unit Testing with a Mock</h2>

<p>Here’s how you’d test the <code>PetService</code> example from earlier:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">TestRegisterPet</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mock</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">client</span><span class="p">.</span><span class="nx">MockClient</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mock</span><span class="p">.</span><span class="nx">CreatePetFunc</span> <span class="p">=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">req</span> <span class="o">*</span><span class="nx">client</span><span class="p">.</span><span class="nx">CreatePetRequest</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">client</span><span class="p">.</span><span class="nx">CreatePetResponse</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">req</span><span class="p">.</span><span class="nx">Name</span> <span class="o">==</span> <span class="s">&#34;&#34;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;name is required&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="o">&amp;</span><span class="nx">client</span><span class="p">.</span><span class="nx">CreatePetResponse</span><span class="p">{</span><span class="nx">ID</span><span class="p">:</span> <span class="s">&#34;mock123&#34;</span><span class="p">},</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">service</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">PetService</span><span class="p">{</span><span class="nx">Client</span><span class="p">:</span> <span class="nx">mock</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">id</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">service</span><span class="p">.</span><span class="nf">RegisterPet</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">(),</span> <span class="s">&#34;Whiskers&#34;</span><span class="p">,</span> <span class="s">&#34;cat&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">t</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="s">&#34;unexpected error: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="nx">id</span> <span class="o">!=</span> <span class="s">&#34;mock123&#34;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">t</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;unexpected ID: got %s, want mock123&#34;</span><span class="p">,</span> <span class="nx">id</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre>
<p>✅ No network.<br>
✅ No JSON marshalling.<br>
✅ No HTTP server.<br>
✅ 100% pure logic test.</p>

<hr>

<h2 id="mock-signature">📐 Mock Signature</h2>

<p>Each method on the mock client has this pattern:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">MockClient</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">CreatePetFunc</span> <span class="kd">func</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">req</span> <span class="o">*</span><span class="nx">CreatePetRequest</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">CreatePetResponse</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre>
<p>If you don’t assign the function, calling the method will panic with a helpful message like:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">panic: mock CreatePetFunc not implemented
</span></span></code></pre>
<p>This ensures you never silently skip behavior in tests.</p>

<hr>

<h2 id="mocking-edge-cases">🎛 Mocking Edge Cases</h2>

<p>You can fully control the behavior of the mock to simulate:</p>

<ul>
<li>Network errors</li>
<li>Unexpected response payloads</li>
<li>Validation failures</li>
<li>Delays or timeouts</li>
</ul>

<p>Example:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nx">mock</span><span class="p">.</span><span class="nx">CreatePetFunc</span> <span class="p">=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">req</span> <span class="o">*</span><span class="nx">CreatePetRequest</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">CreatePetResponse</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;server temporarily unavailable&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre>
<p>This lets you test retries, fallbacks, or error handling logic—without hitting a real endpoint.</p>

<hr>

<h2 id="table-driven-testing-with-mocks">🔁 Table-Driven Testing with Mocks</h2>

<p>Want to test multiple scenarios cleanly? Use table-driven tests:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nx">tests</span> <span class="o">:=</span> <span class="p">[]</span><span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">  <span class="nx">setup</span> <span class="kd">func</span><span class="p">(</span><span class="o">*</span><span class="nx">client</span><span class="p">.</span><span class="nx">MockClient</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">expectErr</span> <span class="kt">bool</span>
</span></span><span class="line"><span class="cl"><span class="p">}{</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="p">:</span> <span class="s">&#34;success&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">setup</span><span class="p">:</span> <span class="kd">func</span><span class="p">(</span><span class="nx">mock</span> <span class="o">*</span><span class="nx">client</span><span class="p">.</span><span class="nx">MockClient</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">mock</span><span class="p">.</span><span class="nx">CreatePetFunc</span> <span class="p">=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">req</span> <span class="o">*</span><span class="nx">CreatePetRequest</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">CreatePetResponse</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="o">&amp;</span><span class="nx">CreatePetResponse</span><span class="p">{</span><span class="nx">ID</span><span class="p">:</span> <span class="s">&#34;abc&#34;</span><span class="p">},</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">expectErr</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="p">:</span> <span class="s">&#34;empty name&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">setup</span><span class="p">:</span> <span class="kd">func</span><span class="p">(</span><span class="nx">mock</span> <span class="o">*</span><span class="nx">client</span><span class="p">.</span><span class="nx">MockClient</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">mock</span><span class="p">.</span><span class="nx">CreatePetFunc</span> <span class="p">=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">req</span> <span class="o">*</span><span class="nx">CreatePetRequest</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">CreatePetResponse</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;name is required&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">expectErr</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">tt</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">tests</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">t</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="nx">tt</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">mock</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">client</span><span class="p">.</span><span class="nx">MockClient</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">tt</span><span class="p">.</span><span class="nf">setup</span><span class="p">(</span><span class="nx">mock</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">service</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">PetService</span><span class="p">{</span><span class="nx">Client</span><span class="p">:</span> <span class="nx">mock</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">service</span><span class="p">.</span><span class="nf">RegisterPet</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">(),</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;dog&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">tt</span><span class="p">.</span><span class="nx">expectErr</span> <span class="o">&amp;&amp;</span> <span class="nx">err</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">t</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;expected error but got nil&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre>
<p>This pattern keeps your test logic tidy and expressive.</p>

<hr>

<h2 id="why-mocks-are-better-than-test-servers">🧠 Why Mocks Are Better Than Test Servers</h2>

<table>
<thead>
<tr>
<th>With MockClient</th>
<th>With Test HTTP Server</th>
</tr>
</thead>

<tbody>
<tr>
<td>No actual HTTP traffic</td>
<td>Requires <code>httptest.Server</code></td>
</tr>

<tr>
<td>Fast and deterministic</td>
<td>Can be slower and flaky</td>
</tr>

<tr>
<td>Full control over behavior</td>
<td>Must parse requests, encode responses</td>
</tr>

<tr>
<td>Statically typed interactions</td>
<td>Often uses <code>interface{}</code> or raw JSON</td>
</tr>

<tr>
<td>Zero setup or teardown</td>
<td>Needs cleanup and coordination</td>
</tr>
</tbody>
</table>
<p>Mocks are ideal when testing <strong>how your code behaves</strong>, not the behavior of the HTTP infrastructure.</p>

<hr>

<h2 id="best-practices">🧼 Best Practices</h2>

<ul>
<li>Use mock clients to test <strong>business logic</strong> that calls APIs</li>
<li>Prefer static stubs over spinning up real HTTP servers</li>
<li>Fail tests if mock methods aren’t configured (<code>nil</code> func = panic)</li>
<li>Test edge cases like retries, timeouts, and malformed responses</li>
</ul>

<hr>

<h2 id="summary">✅ Summary</h2>

<p>gohandlers-generated mock clients help you write tests that are:</p>

<ul>
<li>Fast ⚡</li>
<li>Predictable 📋</li>
<li>Focused 🔍</li>
<li>Typed-safe 🧬</li>
</ul>

<p>You don’t need to write mocks by hand, and you don’t need to simulate full HTTP interactions. With gohandlers, testing your API-consuming code is just as clean as writing it.</p>

<p><strong>Code with confidence. Test with ease.</strong> 🧪✅🚀</p>

      </main>

    </div>
  </body>

</html>
