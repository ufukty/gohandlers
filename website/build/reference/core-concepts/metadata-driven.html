<!-- Do not edit. Auto-generated by Kask  -->

<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metadata-Driven Routing &amp; Automatic Handler Registration - Gohandlers</title>

    
    <link rel="stylesheet" href="/propagate-155137bd-8795-44d5-af23-b41459967440.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code&family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
  </head>

  <body>

    <div class="site-wide-note">Machine generated documentation. <a href="https://github.com/ufukty/gohandlers/issues" target="_self">Contribute</a> to improve quality together.</div>

    <div id="markdown-page-column-layout">

      <header>
        <nav id="sitemap">
          <details open>
            <summary>Site map</summary>
            <div class="summarized">
              

<ul>
  
  <a href="/index.html">gohandlers</a>
  
  
  <li>

<ul>
  
  <span>Articles</span>
  
  
  <li>

<ul>
  
  <span>Getting Started</span>
  
  
  
  <li>

<ul>
  
  <a href="/articles/getting-started/getting-started.html">Getting Started with gohandlers: Build HTTP APIs in Go‚ÄîEffortlessly!</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/articles/getting-started/overview.html">Overview: What Problem Does gohandlers Solve?</a>
  
  
  
</ul>

</li>
</ul>

</li>
  <li>

<ul>
  
  <span>Using Gohandlers</span>
  
  
  
  <li>

<ul>
  
  <a href="/articles/using-gohandlers/the-gohandler-way.html">The gohandlers Way of Writing HTTP Handlers in Go</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/articles/using-gohandlers/understanding-binding-structs-and-tags.html">Understanding Binding Structs and Tags in gohandlers</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/articles/using-gohandlers/understanding-validation-and-custom-types.html">Understanding Validation &amp; Custom Types in gohandlers</a>
  
  
  
</ul>

</li>
</ul>

</li>
  
</ul>

</li>
  <li>

<ul>
  
  <span>Reference</span>
  
  
  <li>

<ul>
  
  <span>Advanced</span>
  
  
  
  <li>

<ul>
  
  <a href="/reference/advanced/complex-api.html">Managing Complex APIs: Advanced Tag Usage in gohandlers</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/advanced/error-handling.html">Error Handling &amp; Customization Patterns in gohandlers</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/advanced/testing-clients.html">Testing Your API with Generated Mock Clients in gohandlers</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/advanced/typed-clients.html">Generating Typed HTTP Clients with gohandlers</a>
  
  
  
</ul>

</li>
</ul>

</li>
  <li>

<ul>
  
  <span>Commands</span>
  
  
  
  <li>

<ul>
  
  <a href="/reference/commands/bindings.html"><code>bindings</code></a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/commands/client.html"><code>client</code></a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/commands/list.html"><code>list</code></a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/commands/mock.html"><code>mock</code></a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/commands/validate.html"><code>validate</code></a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/commands/yaml.html"><code>yaml</code></a>
  
  
  
</ul>

</li>
</ul>

</li>
  <li>

<ul>
  
  <span>Core Concepts</span>
  
  
  
  <li>

<ul>
  
  <a href="/reference/core-concepts/metadata-driven.html">Metadata-Driven Routing &amp; Automatic Handler Registration</a>
  
  
  
</ul>

</li>
  <li>

<ul>
  
  <a href="/reference/core-concepts/overview.html">overview</a>
  
  
  
</ul>

</li>
</ul>

</li>
  <li>

<ul>
  
  <span>Internals</span>
  
  
  
  <li>

<ul>
  
  <a href="/reference/internals/overview.html">overview</a>
  
  
  
</ul>

</li>
</ul>

</li>
  
</ul>

</li>
  
</ul>


            </div>
          </details>
        </nav>

        
        <nav id="toc">
          <details open>
            <summary>In this page</summary>
            <div class="summarized">
              <ul>
                
                <li>
                  <a href="#metadata-driven-routing-automatic-handler-registration" class="toc1">Metadata-Driven Routing &amp; Automatic Handler Registration</a>
                  
                  <ul>
                    
                    <li>
                      <a href="#the-problem-with-manual-routing" class="toc2">üéØ The Problem with Manual Routing</a>
                      
                    </li>
                    <li>
                      <a href="#the-gohandlers-solution" class="toc2">‚úÖ The gohandlers Solution</a>
                      
                    </li>
                    <li>
                      <a href="#how-metadata-is-collected" class="toc2">üîç How Metadata is Collected</a>
                      
                    </li>
                    <li>
                      <a href="#the-listhandlers-function" class="toc2">üóÇÔ∏è The <code>ListHandlers()</code> Function</a>
                      
                    </li>
                    <li>
                      <a href="#automatic-routing-benefits" class="toc2">üß† Automatic Routing Benefits</a>
                      
                    </li>
                    <li>
                      <a href="#yaml-documentation-export" class="toc2">üìÑ YAML Documentation Export</a>
                      
                    </li>
                    <li>
                      <a href="#declaring-metadata-with-comments" class="toc2">‚úçÔ∏è Declaring Metadata with Comments</a>
                      
                    </li>
                    <li>
                      <a href="#filtering-handlers-by-receiver" class="toc2">‚öôÔ∏è Filtering Handlers by Receiver</a>
                      
                    </li>
                    <li>
                      <a href="#best-practices" class="toc2">üßº Best Practices</a>
                      
                    </li>
                    <li>
                      <a href="#summary" class="toc2">üöÄ Summary</a>
                      
                    </li>
                  </ul>
                </li>
              </ul>
            </div>
          </details>
        </nav>
      </header>

      <script>
        function onChange(eval, callback) {
          let last;
          return () => {
            let next = eval()
            if (last != next) {
              last = next
              callback()
            }
          }
        }
        function detailsElemStateAdjuster() {
          let elems = document.querySelectorAll("nav>details")
          let summaries = document.querySelectorAll("nav>details>summary")
          return () => {
            elems.forEach(e => {
              e.open = window.innerWidth >= 700
            })
            summaries.forEach(e => {
              e.style.display = window.innerWidth >= 700 ? "none" : "block"
              e.onclick = window.innerWidth >= 700 ? (e) => { e.preventDefault() } : undefined
            })
          }
        }
        let adjuster = detailsElemStateAdjuster()
        adjuster()
        window.addEventListener("resize", onChange(() => { return window.innerWidth >= 700 }, adjuster, 100))
      </script>

      <main class="markdown">
        <h1 id="metadata-driven-routing-automatic-handler-registration">Metadata-Driven Routing &amp; Automatic Handler Registration</h1>

<p>Routing in Go web applications can quickly become a tangled web of <code>mux.HandleFunc(...)</code> calls, especially as your API grows. Keeping route paths, handler names, and HTTP methods in sync across documentation and implementation can become a serious source of bugs and drift.</p>

<p><strong>gohandlers</strong> eliminates this problem by embracing a <strong>metadata-driven approach</strong> to routing‚Äîautomatically generating handler registrations based on your code‚Äôs structure and field tags. In this article, we‚Äôll walk through how it works, how to use it, and how it keeps your server and docs perfectly in sync.</p>

<h2 id="the-problem-with-manual-routing">üéØ The Problem with Manual Routing</h2>

<p>Here‚Äôs what typical manual routing might look like:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nx">mux</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">NewServeMux</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nx">mux</span><span class="p">.</span><span class="nf">HandleFunc</span><span class="p">(</span><span class="s">&#34;/pets&#34;</span><span class="p">,</span> <span class="nx">listPetsHandler</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">mux</span><span class="p">.</span><span class="nf">HandleFunc</span><span class="p">(</span><span class="s">&#34;/pets/{id}&#34;</span><span class="p">,</span> <span class="nx">getPetHandler</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">mux</span><span class="p">.</span><span class="nf">HandleFunc</span><span class="p">(</span><span class="s">&#34;/pets&#34;</span><span class="p">,</span> <span class="nx">createPetHandler</span><span class="p">)</span> <span class="c1">// different method!
</span></span></span></code></pre>
<p>Issues this introduces:</p>

<ul>
<li>Easy to duplicate or misconfigure paths and methods</li>
<li>No link between the URL and the handler‚Äôs logic or data model</li>
<li>Hard to discover or document routes</li>
<li>No enforcement of consistency between handlers and their metadata</li>
</ul>

<h2 id="the-gohandlers-solution">‚úÖ The gohandlers Solution</h2>

<p>gohandlers generates routing metadata automatically by inspecting:</p>

<ul>
<li>Your handler names (e.g., <code>GetPet</code>, <code>ListPets</code>)</li>
<li>Associated request/response structs (<code>GetPetRequest</code>, etc.)</li>
<li>Tags like <code>route</code>, <code>query</code>, and <code>json</code></li>
<li>Optional documentation comments like <code>// GET /pets/{id}</code></li>
</ul>

<p>From this, it generates:</p>

<ol>
<li><strong>A function that returns all your handlers as a map</strong></li>
<li><strong>A YAML file documenting your HTTP surface</strong></li>
<li><strong>Everything in sync with your real code</strong></li>
</ol>

<h2 id="how-metadata-is-collected">üîç How Metadata is Collected</h2>

<p>gohandlers parses your code and builds a model for each handler, including:</p>

<ul>
<li>Handler name (e.g. <code>CreatePet</code>)</li>
<li>HTTP method (e.g. <code>POST</code>)</li>
<li>URL path (e.g. <code>/pets</code>)</li>
<li>Reference to the actual Go handler function</li>
</ul>

<p>This metadata comes from:</p>

<table>
<thead>
<tr>
<th>Source</th>
<th>What it provides</th>
</tr>
</thead>

<tbody>
<tr>
<td>Function names</td>
<td>Base name of the handler</td>
</tr>

<tr>
<td>Comments (<code>// GET /users</code>)</td>
<td>HTTP method and path if explicitly declared</td>
</tr>

<tr>
<td>Tags on struct fields</td>
<td>Parameters used in URL paths or query</td>
</tr>

<tr>
<td>Struct naming (<code>XRequest</code>)</td>
<td>Used to infer method and path</td>
</tr>
</tbody>
</table>
<p>If no method or path is declared, gohandlers uses naming conventions and your binding struct‚Äôs <code>route:</code> tags to derive them automatically.</p>

<h2 id="the-listhandlers-function">üóÇÔ∏è The <code>ListHandlers()</code> Function</h2>

<p>For each group of handlers (e.g., all methods on a struct like <code>*Pets</code>), gohandlers generates a <code>ListHandlers()</code> method:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">Pets</span><span class="p">)</span> <span class="nf">ListHandlers</span><span class="p">()</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="nx">HandlerInfo</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="nx">HandlerInfo</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;CreatePet&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Method</span><span class="p">:</span> <span class="s">&#34;POST&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Path</span><span class="p">:</span>   <span class="s">&#34;/pets&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Ref</span><span class="p">:</span>  <span class="nx">p</span><span class="p">.</span><span class="nx">CreatePet</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="s">&#34;GetPet&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Method</span><span class="p">:</span> <span class="s">&#34;GET&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Path</span><span class="p">:</span>   <span class="s">&#34;/pets/{id}&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Ref</span><span class="p">:</span>  <span class="nx">p</span><span class="p">.</span><span class="nx">GetPet</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre>
<p>Each <code>HandlerInfo</code> struct includes:</p>

<ul>
<li><code>Method</code>: The HTTP method (e.g. <code>GET</code>, <code>POST</code>)</li>
<li><code>Path</code>: The route pattern, with <code>{param}</code> placeholders</li>
<li><code>Ref</code>: A reference to the actual handler function (<code>http.HandlerFunc</code>)</li>
</ul>

<p>You can now wire up all routes in one consistent loop:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nx">mux</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">NewServeMux</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">h</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">myHandler</span><span class="p">.</span><span class="nf">ListHandlers</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mux</span><span class="p">.</span><span class="nf">HandleFunc</span><span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">Path</span><span class="p">,</span> <span class="nx">h</span><span class="p">.</span><span class="nx">Ref</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre>
<h2 id="automatic-routing-benefits">üß† Automatic Routing Benefits</h2>

<ul>
<li><strong>No manual route wiring:</strong> Paths and handlers stay in sync with your code.</li>
<li><strong>No route duplication bugs:</strong> Each handler is defined only once.</li>
<li><strong>Cleaner <code>main.go</code>:</strong> No clutter of <code>mux.HandleFunc(...)</code> calls.</li>
<li><strong>Perfect doc generation:</strong> Routes and methods are exported to a YAML file (<code>gh.yml</code>) for use in documentation or tooling.</li>
</ul>

<h2 id="yaml-documentation-export">üìÑ YAML Documentation Export</h2>

<p>Along with code generation, gohandlers creates a YAML representation of your route metadata:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="nt">CreatePet</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l">POST</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">/pets</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">GetPet</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l">GET</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l">/pets/{id}</span><span class="w">
</span></span></span></code></pre>
<p>This file is generated by the <code>yaml</code> command (triggered alongside <code>list</code>) and can be used to:</p>

<ul>
<li>Generate static documentation</li>
<li>Drive OpenAPI spec generators</li>
<li>Share your API structure with frontend or integration teams</li>
</ul>

<h2 id="declaring-metadata-with-comments">‚úçÔ∏è Declaring Metadata with Comments</h2>

<p>If you want more control, gohandlers supports in-code comments above your handlers:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl"><span class="c1">// POST /pets
</span></span></span><span class="line"><span class="cl"><span class="c1">// gh:list
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">Pets</span><span class="p">)</span> <span class="nf">CreatePet</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
</span></span></code></pre>
<p>This explicitly tells gohandlers:</p>

<ul>
<li>Use <code>POST</code> as the HTTP method</li>
<li>Use <code>/pets</code> as the path</li>
<li>Include this handler in <code>ListHandlers()</code></li>
</ul>

<p>This is useful when the default inference from naming isn‚Äôt sufficient or if you want to override it.</p>

<h2 id="filtering-handlers-by-receiver">‚öôÔ∏è Filtering Handlers by Receiver</h2>

<p>If your application is organized by service types (e.g., <code>Pets</code>, <code>Users</code>, <code>Orders</code>), you can generate handler lists per receiver using the <code>--recv</code> flag:</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="cl">gohandlers list --dir handlers/pets --recv Pets --out list.gh.go
</span></span></code></pre>
<p>This lets you cleanly group and register handlers on a per-module basis.</p>

<h2 id="best-practices">üßº Best Practices</h2>

<ul>
<li>Use meaningful handler names (<code>GetPet</code>, <code>ListOrders</code>, etc.)</li>
<li>Always tag route fields with <code>route:&quot;...&quot;</code> to clarify URL parameters</li>
<li>Use structured comments to document custom routes and methods</li>
<li>Keep related handlers grouped under receiver structs (e.g. <code>*Pets</code>)</li>
</ul>

<h2 id="summary">üöÄ Summary</h2>

<p>gohandlers‚Äô metadata-driven routing and automatic registration eliminates the need to manually wire up routes. It:</p>

<ul>
<li>Keeps your handlers and routes in sync</li>
<li>Reduces the potential for errors or duplication</li>
<li>Provides a clean, declarative routing setup</li>
<li>Enables easy documentation export via YAML</li>
</ul>

<p>Whether your API has 5 endpoints or 500, gohandlers ensures every route is consistent, discoverable, and connected to real code.</p>

<p><strong>One source of truth. Zero boilerplate. Fully synchronized.</strong></p>

<p>Happy routing! üó∫Ô∏è</p>

      </main>

    </div>
  </body>

</html>
